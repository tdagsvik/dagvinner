<!doctype html>
<html lang="no">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dagvinner.no ‚Äì sm√•historier om en elendig vinner</title>
  <meta name="description"
    content="En lett og leken samling sm√•historier om hvordan Dag er en elendig vinner. Send inn din historie og stem p√• favorittene." />
  <meta name="theme-color" content="#111827" />
  <meta property="og:title" content="Dagvinner.no ‚Äì sm√•historier om en elendig vinner" />
  <meta property="og:description" content="Lese, le og dele historier om Dags imponerende evner som‚Ä¶ elendig vinner." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://dummyimage.com/1200x630/111827/ffffff&text=Dagvinner.no" />
  <style>
    :root {
      --bg: #0b1220;
      /* dyp bl√•svart */
      --panel: #111827;
      /* grafitt */
      --muted: #9ca3af;
      /* gr√• */
      --text: #f9fafb;
      /* nesten hvit */
      --accent: #22d3ee;
      /* cyan */
      --accent-2: #f59e0b;
      /* amber */
      --ring: rgba(34, 211, 238, .35);
      --success: #34d399;
      --danger: #ef4444;
    }

    /* Light mode */
    @media (prefers-color-scheme: light) {
      :root {
        --bg: #f9fafb;
        --panel: #ffffff;
        --muted: #6b7280;
        --text: #0b1220;
        --accent: #0891b2;
        --accent-2: #b45309;
        --ring: rgba(8, 145, 178, .2);
      }
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      height: 100%;
    }

    body {
      margin: 0;
      font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: radial-gradient(1200px 1200px at 10% -5%, rgba(34, 211, 238, .08), transparent),
        radial-gradient(1000px 900px at 100% 0%, rgba(245, 158, 11, .06), transparent), var(--bg);
    }

    a {
      color: var(--accent);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 24px;
    }

    header {
      position: sticky;
      top: 0;
      z-index: 40;
      backdrop-filter: saturate(120%) blur(10px);
      background: color-mix(in oklab, var(--bg) 70%, transparent);
      border-bottom: 1px solid color-mix(in oklab, var(--panel) 70%, transparent);
    }

    .nav {
      display: flex;
      align-items: center;
      gap: 16px;
      justify-content: space-between;
    }

    .logo {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      font-weight: 800;
      letter-spacing: .2px;
    }

    .logo svg {
      width: 28px;
      height: 28px;
    }

    .nav a {
      opacity: .9;
    }

    .hero {
      display: grid;
      grid-template-columns: 1.2fr 1fr;
      gap: 24px;
      align-items: center;
      padding: 40px 0 8px;
    }

    @media (max-width: 860px) {
      .hero {
        grid-template-columns: 1fr;
        padding-top: 18px;
      }
    }

    .card {
      background: linear-gradient(180deg, color-mix(in oklab, var(--panel) 88%, transparent) 0%, var(--panel) 100%);
      border: 1px solid color-mix(in oklab, var(--panel) 85%, transparent);
      border-radius: 16px;
      padding: 18px 18px 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, .2);
    }

    h1 {
      font-size: clamp(28px, 5vw, 42px);
      margin: 0 0 10px;
      line-height: 1.15;
    }

    h2 {
      font-size: clamp(22px, 3.2vw, 28px);
      margin: 20px 0 10px;
    }

    p.lead {
      font-size: 18px;
      color: var(--muted);
      margin-top: 0;
    }

    .filters {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }

    .input,
    .button,
    .chip {
      border: 1px solid color-mix(in oklab, var(--panel) 75%, transparent);
      background: color-mix(in oklab, var(--panel) 90%, transparent);
      color: var(--text);
      border-radius: 999px;
      padding: 10px 14px;
      outline: none;
    }

    .input:focus {
      box-shadow: 0 0 0 6px var(--ring);
      border-color: var(--accent);
    }

    .button {
      cursor: pointer;
      font-weight: 600;
    }

    .button.primary {
      background: linear-gradient(135deg, var(--accent), color-mix(in oklab, var(--accent) 60%, var(--accent-2)));
      border-color: transparent;
      color: #001018;
    }

    .button.ghost {
      background: transparent;
    }

    .stories {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 16px;
      margin-top: 18px;
    }

    @media (max-width: 1000px) {
      .stories {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (max-width: 640px) {
      .stories {
        grid-template-columns: 1fr;
      }
    }

    .story {
      position: relative;
      overflow: clip;
    }

    .story-header {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .tag {
      font-size: 12px;
      color: var(--muted);
      background: color-mix(in oklab, var(--panel) 80%, transparent);
      border: 1px solid color-mix(in oklab, var(--panel) 70%, transparent);
      padding: 4px 8px;
      border-radius: 999px;
    }

    .story h3 {
      margin: 10px 0 6px;
      font-size: 18px;
    }

    .story p {
      margin: 0 0 12px;
      color: color-mix(in oklab, var(--text) 85%, #fff 0%);
    }

    .meta {
      display: flex;
      gap: 10px;
      align-items: center;
      justify-content: space-between;
      color: var(--muted);
      font-size: 13px;
    }

    .rate {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .rate b {
      color: var(--accent-2);
    }

    .empty {
      text-align: center;
      color: var(--muted);
      padding: 30px 6px;
    }

    footer {
      margin: 36px 0 24px;
      color: var(--muted);
      text-align: center;
    }

    .divider {
      height: 1px;
      background: color-mix(in oklab, var(--panel) 70%, transparent);
      margin: 12px 0;
      border-radius: 999px;
    }

    .kbd {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      padding: 2px 6px;
      border-radius: 6px;
      border: 1px solid color-mix(in oklab, var(--panel) 75%, transparent);
      background: color-mix(in oklab, var(--panel) 90%, transparent);
    }

    /* tiny confetti for the "tilfeldig" knapp */
    .confetti {
      position: fixed;
      inset: 0;
      pointer-events: none;
    }

    /* media */
    .media {
      position: relative;
      overflow: hidden;
      border-radius: 14px;
      border: 1px solid color-mix(in oklab, var(--panel) 75%, transparent);
      background: color-mix(in oklab, var(--panel) 85%, transparent);
      aspect-ratio: 16/9;
      margin-bottom: 10px;
    }

    .media img,
    .media video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .media video {
      background: #000;
    }

    /* vis hele media uten cropping ved portrett */
    .media[data-fit="contain"] img,
    .media[data-fit="contain"] video {
      object-fit: contain;
      background: #000;
      /* letterboxing */
    }

    /* juster aspektforhold dynamisk */
    .media[data-ratio="9/16"] {
      aspect-ratio: 9/16;
    }

    .media[data-ratio="16/9"] {
      aspect-ratio: 16/9;
    }

    /* valgfritt, eksplisitt */
    .media[data-ratio="1/1"] {
      aspect-ratio: 1/1;
    }

    /* hvis du vil st√∏tte kvadrat */
    .media[data-ratio="auto"] {
      aspect-ratio: auto;
    }

    /* --- Mobil-luft rundt header/hero og s√∏kekort --- */
    :root {
      --safe-top: env(safe-area-inset-top, 0px);
    }

    @media (max-width: 700px) {

      /* litt mer side-padding p√• sm√• skjermer */
      .container {
        padding-left: 18px;
        padding-right: 18px;
      }

      /* mer plass mellom sticky header og hero-innholdet */
      .hero {
        padding-top: calc(28px + var(--safe-top));
        /* var tidligere 18px */
        padding-bottom: 14px;
        gap: 20px;
        /* st√∏rre vertikal avstand mellom hero-tekst og kortet */
      }

      /* ekstra luft rundt filter-kortet */
      #filtersCard {
        margin-top: 8px;
        /* avstand til hero-teksten */
        padding: 20px;
        /* litt romsligere inni kortet */
        border-radius: 18px;
      }

      /* gj√∏r s√∏kefeltet litt h√∏yere/luftigere */
      #filtersCard .input {
        padding: 12px 16px;
      }

      #filtersCard .filters {
        gap: 16px;
      }
    }
  </style>
</head>

<body>
  <header>
    <div class="container nav">
      <a class="logo" href="#" aria-label="Dagvinner.no hjem">
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M6 3h12v4a6 6 0 1 1-12 0V3Z" stroke="currentColor" stroke-width="1.5" />
          <path d="M6 7c0 3.314 2.686 6 6 6s6-2.686 6-6" stroke="currentColor" stroke-width="1.5" />
          <path d="M6 13h12v3a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3v-3Z" stroke="currentColor" stroke-width="1.5" />
        </svg>
        <span>Dagvinner<span style="opacity:.6">.no</span></span>
      </a>
      <nav class="controls">
        <a href="#historier">Historier</a>
        <a href="#bidra">Bidra</a>
      </nav>
    </div>
  </header>

  <div class="container hero">
    <div>
      <h1>Dag er en <em>elendig</em> vinner</h1>
      <p class="lead">Her samler vi sm√• √∏yeblikk av stor sports√•nd‚Ä¶ Bla i historier, trekk en
        tilfeldig, eller send inn din egen.</p>
      <div class="controls" style="margin-top:12px">
        <button class="button primary" id="randomBtn" aria-label="Vis en tilfeldig historie">üé≤ Vis tilfeldig</button>
      </div>
    </div>

    <div class="card" id="filtersCard" aria-labelledby="filtersHeading">
      <div class="filters">
        <label>
          <input id="search" class="input" type="search" placeholder="S√∏k i historier" />
        </label>
      </div>
    </div>
  </div>

  <div class="container" id="historier">
    <div class="stories" id="stories"></div>
    <p class="empty" id="emptyState" hidden>Ingen historier matcher s√∏ket. Pr√∏v et annet ord eller fjern noen filtre.
    </p>
  </div>


  <div class="container" id="bidra">
    <div class="card">
      <h2>Bidra med din historie</h2>
      <p>Vi har alle v√¶rt ofre for Dags elendige vinnerstil. Del dine opplevelser. #metoo</p>
      <div class="controls">
        <a id="mailto" class="button primary" href="mailto:thomasedagsvik@gmail.com">‚úâÔ∏è Send inn p√• e-post</a>
      </div>
    </div>
  </div>

  <footer class="container">
    Laget med ‚ù§Ô∏è av Knobben og Dagsvik ¬© <span id="year"></span> Dagvinner.no
  </footer>

  <canvas class="confetti" id="confetti" width="0" height="0" aria-hidden="true"></canvas>

  <script>
    // --- Data ---
    const STORIES = [
      {
        id: 1, title: "Rooster", tags: ["settlers", "snapchat", "roost", "dans"], year: 2023,
        text: "Dag slo Eldri i Settlers, og spilte inn denne filmen. Ikke for √• roaste, men ¬´rooste¬ª. Yeah yeah yeah, la la la üé∂",
        video: { src: "assets/videos/kylling_settlers.mp4" }
      },
      {
        id: 2, title: "Bowling-dans", tags: ["bowling", "dans"], year: 2010,
        text: "Dag vant i bowling, og danset og sang i kjent stil. Det ble til slutt nok for √©n av motspillerne, som tok med seg den eneste bilen og kj√∏rte hjem. Dag og resten m√•tte ta buss hjem."
      },
      {
        id: 3, title: "Halo-musikk", tags: ["halo", "musikk"], year: 2007,
        text: "Dag og Thomas slo Bj√∏rnstad i Halo. De gikk s√• hen og spilte inn fem sanger p√• rappen (med piano, bongotrommer og trekkspill) om hvor elendig Bj√∏rstad er i Halo. Bj√∏rnstad fikk nok midt i sang nr. 3, og dro hjem. 'Dette gidder jeg ikke, gutter'"
      },
      {
        id: 4, title: "Ketchup", tags: ["ketchup", "hevnlyst"], year: 2011,
        text: "Pernille griste litt ketchup p√• Dag med et uhell. Dag responderte med √• t√∏mme en hel ketchupflaske i h√•ret hennes."
      },
      {
        id: 5, title: "Der Stickmann", tags: ["stick man", "br√∏l"], year: 2009,
        text: "Claussen: 'I en periode p√• videreg√•ende var det flash spillet ¬´stick man badminton¬ª som var tingen. Friminuttene f√∏r og etter tysktimene ble arenaen der vi m√∏ttes, eneste felles fag. Vi ble raskt gode, fryktelig gode. Dette f√∏rte til at spill gjerne ble forlenget godt inn i tysktimen til Sissel Hoff. Match ball, 5-5 stod det da timen begynte og vekslingen varte i 10-12 minutter f√∏r Dag vant 6-5. Dag delte et enormt br√∏l med tyskklassen som var godt inn i timen. Deretter havnet Dag og jeg i tidenes latterkule. Til slutt ble vi bedt om √• g√• rolig til toalettet og vaske oss i ansiktet f√∏r vi fikk komme tilbake til tysktimen.'"
      },
      {
        id: 6, title: "Hiv og hoi", tags: ["sang", "sonar", "voss"], year: 2021,
        text: "Dag sitt lag vant i spillet 'Sonar' p√• Voss. Dag leder selvsagt an med l√•ten ¬´Hiv og hoi¬ª for √• roaste motstanderne. Langemann lurer alle üé∂",
        video: { src: "assets/videos/hivoghoi.mp4" }
      },
      {
        id: 7, title: "STAV DET!", tags: ["bezzerwizzer"], year: 2012,
        text: "Williksen: En av v√•re f√∏rste m√∏ter med Dag som brettspiller i Trondheim holdt han p√• √• tape i Bezzerwizzer og satt h√∏ylytt og ropte ¬´STAV DET! STAV DET¬ª s√•nn at han kunne underkjenne svaret til Odd",
      },
      {
        id: 8, title: "Barnehageregler", tags: ["barnehage", "staving"], year: 2025,
        text: "Williksen: Dag og jeg har jo ogs√• en kontinuerlig diskusjon om reglene i samtlige spill - hvor han mener jeg har ¬´barnehageregler¬ª skapt av min familie. Hvorp√• han kontrer med √• lage sine egne regler for √• kompensere",
      },
      {
        id: 9, title: "Kveitebolle", tags: ["miming", "staving"], year: 2025,
        text: "Sunva: Den f√∏lelsen n√•r eg bettopp har gjetta rett p√• miming av ¬´kveitebolle¬ª og f√•r trekk for at eg ikkje sa kveitebolleN. ¬´Det er bundet form, entall! Den f√•r du ingenting for!¬ª",
      },
      {
        id: 10, title: "LoL School", tags: ["lol", "instructions", "gaming"], year: 2024,
        text: "Dag sl√•r Morten i Leage of Legends og spiller inn en lang oppl√¶ringsvideo til Morten.",
        video: { src: "assets/videos/lolschool.mp4" }
      },
      {
        id: 11, title: "Eazy peazy", tags: ["lol", "sang", "gaming"], year: 2024,
        text: "Dag sl√•r Smaamo i Leage of Legends",
        video: { src: "assets/videos/ez.mp4" }
      },
      {
        id: 12, title: "Look at the stats", tags: ["dota", "snapchat", "gaming"], year: 2024,
        text: "Dag henger ut en kompis som har tapt i dota.",
        video: { src: "assets/videos/dota.mp4" }
      },
      {
        id: 13,
        title: "Happy fantasy",
        tags: ["fantasy", "pl", "bursdag"],
        year: 2023,
        text: "Dag sin bursdagshilsen til Smaamo, som tydelig viser at han har sl√•tt ham i Premier League Fantasy.",
        img: "assets/images/fantasy.png",
      },
      {
        id: 13,
        title: "Ez ez ez",
        tags: ["lol", "sang", "gaming"],
        year: 2024,
        text: "Dag har laget en en mobbbesang om hvor d√•rlige alle vennene er i League of Legends.",
        video: { src: "assets/videos/ez_song.mp4" }
      },
    ];

    const TAGS = [
      { key: 'settlers', label: 'Settlers' },
      { key: 'snapchat', label: 'Snapchat' },
      { key: 'roost', label: 'Roost' },
      { key: 'dans', label: 'Dans' },
      { key: 'bowling', label: 'Bowling' },
      { key: 'halo', label: 'Halo' },
      { key: 'hevnlyst', label: 'Hevnlyst' },
      { key: 'voss', label: 'Voss' },
    ];

    // --- Helpers ---
    const $ = (sel, el = document) => el.querySelector(sel);
    const $$ = (sel, el = document) => Array.from(el.querySelectorAll(sel));
    const state = {
      search: '',
      tag: 'alle'
    };
    // Base path for assets so it works on both GitHub Pages project sites and custom domain
    const isGithub = location.hostname.endsWith('github.io');
    const isFile = location.protocol === 'file:';
    const BASE = isFile
      ? './'                                  // n√•r du √•pner index direkte
      : (isGithub ? `/${location.pathname.split('/')[1]}/` : '/');

    function renderTags() {
      const wrap = $('#tags');
      wrap.innerHTML = '';
      TAGS.forEach(t => {
        const btn = document.createElement('button');
        btn.className = 'chip button' + (state.tag === t.key ? ' primary' : '');
        btn.type = 'button';
        btn.textContent = t.label;
        btn.setAttribute('data-tag', t.key);
        btn.onclick = () => {
          state.tag = t.key;
          localStorage.setItem('dagvinner.tag', state.tag);
          renderTags();
          renderStories();
        };
        wrap.appendChild(btn);
      });
    }

    function autoAspect(scope = document) {
      // VIDEO
      scope.querySelectorAll('video').forEach(v => {
        v.addEventListener('loadedmetadata', () => {
          const wrap = v.closest('.media');
          if (!wrap) return;
          const isLandscape = v.videoWidth >= v.videoHeight;
          if (!wrap.dataset.ratio) wrap.dataset.ratio = isLandscape ? '16/9' : '9/16';
          if (!isLandscape && !wrap.dataset.fit) wrap.dataset.fit = 'contain';
        }, { once: true });
      });

      // BILDE
      scope.querySelectorAll('.media img').forEach(img => {
        const apply = () => {
          const wrap = img.closest('.media');
          if (!wrap) return;
          const isLandscape = img.naturalWidth >= img.naturalHeight;
          if (!wrap.dataset.ratio) wrap.dataset.ratio = isLandscape ? '16/9' : '9/16';
          if (!isLandscape && !wrap.dataset.fit) wrap.dataset.fit = 'contain';
        };
        if (img.complete) apply();
        else img.addEventListener('load', apply, { once: true });
      });
    }

    function storyHTML(s) {
      const tagBadges = s.tags
        .slice(0, 3)
        .map(t => `<span class="tag">${t}</span>`)
        .join(' ');

      const mediaHTML = s.video
        ? `
      <div class="media">
        <video controls preload="metadata" ${s.video.poster ? `poster="${BASE}${s.video.poster}"` : ''}>
          <source src="${BASE}${s.video.src}" type="video/mp4">
          Din nettleser st√∏tter ikke video-taggen.
        </video>
      </div>`
        : s.img
          ? `
      <div class="media">
        <img src="${BASE}${s.img}" alt="${s.imgAlt || s.title}" loading="lazy" decoding="async">
      </div>`
          : '';

      return `
    <article class="card story" tabindex="0" aria-labelledby="s-${s.id}-title">
      <div class="story-header">${tagBadges}</div>
      ${mediaHTML}
      <h3 id="s-${s.id}-title">${s.title}</h3>
      <p>${s.text}</p>
      <div class="meta">
        <span>√Ör: ${s.year}</span>
      </div>
    </article>`;
    }

    /*
    function matches(s) {
      const q = state.search.trim().toLowerCase();
      const inTag = state.tag === 'alle' || s.tags.includes(state.tag);
      const inText = !q || (s.title + ' ' + s.text + ' ' + s.tags.join(' ')).toLowerCase().includes(q);
      return inTag && inText;
    }*/

    function matches(_) { return true; }

    /*
    function renderStories(scrollToTop = false) {
      const grid = $('#stories');
      const items = STORIES.filter(matches);
      grid.innerHTML = items.map(storyHTML).join('');
      $('#emptyState').hidden = items.length !== 0;
      if (scrollToTop) window.scrollTo({ top: grid.offsetTop - 60, behavior: 'smooth' });
      autoAspect($('#stories'));
    }*/

    function renderStories(scrollToTop = false) {
      const grid = $('#stories');
      const items = STORIES;                 // ikke filter
      grid.innerHTML = items.map(storyHTML).join('');
      $('#emptyState').hidden = true;
      if (scrollToTop) window.scrollTo({ top: grid.offsetTop - 60, behavior: 'smooth' });
      autoAspect(grid);
    }

    
    function randomStory() {
      const pool = STORIES;           // ikke filter
      if (!pool.length) return;
      const s = pool[Math.floor(Math.random() * pool.length)];
      $('#stories').innerHTML = storyHTML(s);
      $('#emptyState').hidden = true;
      autoAspect($('#stories'));
      confetti();
      window.location.hash = '#historier';
    }

    /*
    function randomStory() {
      const pool = STORIES.filter(matches);
      if (!pool.length) return;
      const s = pool[Math.floor(Math.random() * pool.length)];
      state.search = '';
      $('#search').value = '';
      state.tag = 'alle';
      renderTags();
      $('#stories').innerHTML = storyHTML(s);
      $('#emptyState').hidden = true;
      autoAspect($('#stories'));
      confetti();
      window.location.hash = '#historier';
    }*/

    // --- Confetti (superenkel) ---
    function confetti() {
      const c = $('#confetti');
      const ctx = c.getContext('2d');
      const W = c.width = window.innerWidth;
      const H = c.height = window.innerHeight;
      const n = 80;
      const pieces = Array.from({ length: n }, () => ({
        x: Math.random() * W, y: -20, r: 4 + Math.random() * 6, vy: 2 + Math.random() * 3, vx: (Math.random() - .5) * 2
      }));
      let tick = 0;
      function frame() {
        ctx.clearRect(0, 0, W, H);
        ctx.globalAlpha = .9;
        ctx.fillStyle = ['#22d3ee', '#f59e0b', '#34d399', '#ef4444'][tick % 4];
        for (const p of pieces) {
          ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2); ctx.fill();
          p.y += p.vy; p.x += p.vx; if (p.y > H + 20) p.y = -10;
        }
        tick++; if (tick < 120) requestAnimationFrame(frame); else ctx.clearRect(0, 0, W, H);
      }
      frame();
    }

    // --- Share helpers ---
    function copy(text) { navigator.clipboard?.writeText(text); }
    function currentLink() { return location.origin + location.pathname + '#historier'; }

    // --- Init ---
    (function init() {
      // restore tag
      state.tag = localStorage.getItem('dagvinner.tag') || 'alle';
      //renderTags();
      renderStories();
      autoAspect(document);
      $('#year').textContent = new Date().getFullYear();

      // bindings
      //$('#search').addEventListener('input', (e) => { state.search = e.target.value; renderStories(); });
      $('#randomBtn').addEventListener('click', randomStory);
      //$('#copyLinkBtn').addEventListener('click', () => { copy(currentLink()); $('#copyLinkBtn').textContent = '‚úÖ Lenke kopiert'; setTimeout(() => $('#copyLinkBtn').textContent = 'üîó Kopier lenke', 1500); });

      // mailto template
      // bindings
      $('#search')?.addEventListener('input', (e) => {
        state.search = e.target.value; renderStories();
      });
      $('#randomBtn')?.addEventListener('click', randomStory);
      $('#copyLinkBtn')?.addEventListener('click', () => { // finnes ikke n√•, men safe med ?.
        copy(currentLink());
        const btn = $('#copyLinkBtn');
        if (btn) {
          btn.textContent = '‚úÖ Lenke kopiert';
          setTimeout(() => btn.textContent = 'üîó Kopier lenke', 1500);
        }
      });

      // mailto template (robust)
      const subject = encodeURIComponent('Bidrag til Dagvinner.no');
      const tmpl = $('#template')?.textContent?.trim() || `Tittel:
√Ör:
Kategori(er):
Historie (2‚Äì4 setninger):
Signatur (valgfritt):`;
      const body = encodeURIComponent(tmpl);
      const mailto = `mailto:thomasedagsvik@gmail.com?subject=${subject}&body=${body}`;
      const mailBtn = $('#mailto');
      if (mailBtn) mailBtn.href = mailto;

      $('#copyTemplateBtn')?.addEventListener('click', () => {
        const t = $('#template')?.textContent || tmpl;
        copy(t);
        const btn = $('#copyTemplateBtn');
        if (btn) {
          btn.textContent = '‚úÖ Mal kopiert';
          setTimeout(() => btn.textContent = 'üìã Kopier mal', 1500);
        }
      });
      // keyboard: focus search with '/'
      window.addEventListener('keydown', (e) => {
        if (e.key === '/') { e.preventDefault(); $('#search').focus(); }
      });
    })();
  </script>
</body>

</html>