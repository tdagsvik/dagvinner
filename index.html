<!doctype html>
<html lang="no">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dagvinner.no ‚Äì sm√•historier om en elendig vinner</title>
  <meta name="description"
    content="En lett og leken samling sm√•historier om hvordan Dag er en elendig vinner. Send inn din historie og stem p√• favorittene." />
  <meta name="theme-color" content="#111827" />
  <meta property="og:title" content="Dagvinner.no ‚Äì sm√•historier om en elendig vinner" />
  <meta property="og:description" content="Lese, le og dele historier om Dags imponerende evner som‚Ä¶ elendig vinner." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://dummyimage.com/1200x630/111827/ffffff&text=Dagvinner.no" />
  <style>
    :root {
      --bg: #0b1220;
      /* dyp bl√•svart */
      --panel: #111827;
      /* grafitt */
      --muted: #9ca3af;
      /* gr√• */
      --text: #f9fafb;
      /* nesten hvit */
      --accent: #22d3ee;
      /* cyan */
      --accent-2: #f59e0b;
      /* amber */
      --ring: rgba(34, 211, 238, .35);
      --success: #34d399;
      --danger: #ef4444;
    }

    /* Light mode */
    @media (prefers-color-scheme: light) {
      :root {
        --bg: #f9fafb;
        --panel: #ffffff;
        --muted: #6b7280;
        --text: #0b1220;
        --accent: #0891b2;
        --accent-2: #b45309;
        --ring: rgba(8, 145, 178, .2);
      }
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      height: 100%;
    }

    body {
      margin: 0;
      font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: radial-gradient(1200px 1200px at 10% -5%, rgba(34, 211, 238, .08), transparent),
        radial-gradient(1000px 900px at 100% 0%, rgba(245, 158, 11, .06), transparent), var(--bg);
    }

    a {
      color: var(--accent);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 24px;
    }

    header {
      position: sticky;
      top: 0;
      z-index: 40;
      backdrop-filter: saturate(120%) blur(10px);
      background: color-mix(in oklab, var(--bg) 70%, transparent);
      border-bottom: 1px solid color-mix(in oklab, var(--panel) 70%, transparent);
    }

    .nav {
      display: flex;
      align-items: center;
      gap: 16px;
      justify-content: space-between;
    }

    .logo {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      font-weight: 800;
      letter-spacing: .2px;
    }

    .logo svg {
      width: 28px;
      height: 28px;
    }

    .nav a {
      opacity: .9;
    }

    .hero {
      display: grid;
      grid-template-columns: 1.2fr 1fr;
      gap: 24px;
      align-items: center;
      padding: 40px 0 8px;
    }

    @media (max-width: 860px) {
      .hero {
        grid-template-columns: 1fr;
        padding-top: 18px;
      }
    }

    .card {
      background: linear-gradient(180deg, color-mix(in oklab, var(--panel) 88%, transparent) 0%, var(--panel) 100%);
      border: 1px solid color-mix(in oklab, var(--panel) 85%, transparent);
      border-radius: 16px;
      padding: 18px 18px 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, .2);
    }

    h1 {
      font-size: clamp(28px, 5vw, 42px);
      margin: 0 0 10px;
      line-height: 1.15;
    }

    h2 {
      font-size: clamp(22px, 3.2vw, 28px);
      margin: 20px 0 10px;
    }

    p.lead {
      font-size: 18px;
      color: var(--muted);
      margin-top: 0;
    }

    .filters {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }

    .input,
    .button,
    .chip {
      border: 1px solid color-mix(in oklab, var(--panel) 75%, transparent);
      background: color-mix(in oklab, var(--panel) 90%, transparent);
      color: var(--text);
      border-radius: 999px;
      padding: 10px 14px;
      outline: none;
    }

    .input:focus {
      box-shadow: 0 0 0 6px var(--ring);
      border-color: var(--accent);
    }

    .button {
      cursor: pointer;
      font-weight: 600;
    }

    .button.primary {
      background: linear-gradient(135deg, var(--accent), color-mix(in oklab, var(--accent) 60%, var(--accent-2)));
      border-color: transparent;
      color: #001018;
    }

    .button.ghost {
      background: transparent;
    }

    .stories {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 16px;
      margin-top: 18px;
    }

    @media (max-width: 1000px) {
      .stories {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (max-width: 640px) {
      .stories {
        grid-template-columns: 1fr;
      }
    }

    .story {
      position: relative;
      overflow: clip;
    }

    .story-header {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .tag {
      font-size: 12px;
      color: var(--muted);
      background: color-mix(in oklab, var(--panel) 80%, transparent);
      border: 1px solid color-mix(in oklab, var(--panel) 70%, transparent);
      padding: 4px 8px;
      border-radius: 999px;
    }

    .story h3 {
      margin: 10px 0 6px;
      font-size: 18px;
    }

    .story p {
      margin: 0 0 12px;
      color: color-mix(in oklab, var(--text) 85%, #fff 0%);
    }

    .meta {
      display: flex;
      gap: 10px;
      align-items: center;
      justify-content: space-between;
      color: var(--muted);
      font-size: 13px;
    }

    .rate {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .rate b {
      color: var(--accent-2);
    }

    .empty {
      text-align: center;
      color: var(--muted);
      padding: 30px 6px;
    }

    footer {
      margin: 36px 0 24px;
      color: var(--muted);
      text-align: center;
    }

    .divider {
      height: 1px;
      background: color-mix(in oklab, var(--panel) 70%, transparent);
      margin: 12px 0;
      border-radius: 999px;
    }

    .kbd {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      padding: 2px 6px;
      border-radius: 6px;
      border: 1px solid color-mix(in oklab, var(--panel) 75%, transparent);
      background: color-mix(in oklab, var(--panel) 90%, transparent);
    }

    /* tiny confetti for the "tilfeldig" knapp */
    .confetti {
      position: fixed;
      inset: 0;
      pointer-events: none;
    }

    /* media */
    .media {
      position: relative;
      overflow: hidden;
      border-radius: 14px;
      border: 1px solid color-mix(in oklab, var(--panel) 75%, transparent);
      background: color-mix(in oklab, var(--panel) 85%, transparent);
      aspect-ratio: 16/9;
      margin-bottom: 10px;
    }

    .media img,
    .media video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .media video {
      background: #000;
    }

    /* vis hele media uten cropping ved portrett */
    .media[data-fit="contain"] img,
    .media[data-fit="contain"] video {
      object-fit: contain;
      background: #000;
      /* letterboxing */
    }

    /* juster aspektforhold dynamisk */
    .media[data-ratio="9/16"] {
      aspect-ratio: 9/16;
    }

    .media[data-ratio="16/9"] {
      aspect-ratio: 16/9;
    }

    /* valgfritt, eksplisitt */
    .media[data-ratio="1/1"] {
      aspect-ratio: 1/1;
    }

    /* hvis du vil st√∏tte kvadrat */
    .media[data-ratio="auto"] {
      aspect-ratio: auto;
    }

    /* --- Mobil-luft rundt header/hero og s√∏kekort --- */
    :root {
      --safe-top: env(safe-area-inset-top, 0px);
    }

    @media (max-width: 700px) {

      /* litt mer side-padding p√• sm√• skjermer */
      .container {
        padding-left: 18px;
        padding-right: 18px;
      }

      /* mer plass mellom sticky header og hero-innholdet */
      .hero {
        padding-top: calc(28px + var(--safe-top));
        /* var tidligere 18px */
        padding-bottom: 14px;
        gap: 20px;
        /* st√∏rre vertikal avstand mellom hero-tekst og kortet */
      }

      /* ekstra luft rundt filter-kortet */
      #filtersCard {
        margin-top: 8px;
        /* avstand til hero-teksten */
        padding: 20px;
        /* litt romsligere inni kortet */
        border-radius: 18px;
      }

      /* gj√∏r s√∏kefeltet litt h√∏yere/luftigere */
      #filtersCard .input {
        padding: 12px 16px;
      }

      #filtersCard .filters {
        gap: 16px;
      }
    }

  </style>
</head>

<body>
  <header>
    <div class="container nav">
      <a class="logo" href="#" aria-label="Dagvinner.no hjem">
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M6 3h12v4a6 6 0 1 1-12 0V3Z" stroke="currentColor" stroke-width="1.5" />
          <path d="M6 7c0 3.314 2.686 6 6 6s6-2.686 6-6" stroke="currentColor" stroke-width="1.5" />
          <path d="M6 13h12v3a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3v-3Z" stroke="currentColor" stroke-width="1.5" />
        </svg>
        <span>Dagvinner<span style="opacity:.6">.no</span></span>
      </a>
      <nav class="controls">
        <a href="#historier">Historier</a>
        <a href="#bidra">Bidra</a>
      </nav>
    </div>
  </header>

  <div class="container hero">
    <div>
      <h1>Dag er en <em>elendig</em> vinner</h1>
      <p class="lead">Her samler vi sm√• √∏yeblikk av stor sports√•nd‚Ä¶ Bla i historier, trekk en
        tilfeldig, eller send inn din egen.</p>
      <div class="controls" style="margin-top:12px">
        <button class="button primary" id="randomBtn" aria-label="Vis en tilfeldig historie">üé≤ Vis tilfeldig</button>
      </div>
    </div>

    <div class="card" id="filtersCard" aria-labelledby="filtersHeading">
      <h2 id="filtersHeading" style="margin-top:4px">Finn historie</h2>
      <div class="filters">
        <label>
          <span style="display:block; font-weight:600; margin-bottom:6px">S√∏k</span>
          <input id="search" class="input" type="search" placeholder="S√∏k i historier (f.eks. sjakk, fifa, quiz)" />
        </label>
        <div>
          <span style="display:block; font-weight:600; margin-bottom:6px">Kategorier</span>
          <div class="controls" id="tags"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="container" id="historier">
    <div class="stories" id="stories"></div>
    <p class="empty" id="emptyState" hidden>Ingen historier matcher s√∏ket. Pr√∏v et annet ord eller fjern noen filtre.
    </p>
  </div>


  <div class="container" id="bidra">
    <div class="card">
      <h2>Bidra med din historie</h2>
      <p>Vi har alle v√¶rt ofre for Dags elendige vinnerstil. Del dine opplevelser. #metoo</p>
      <div class="controls">
        <a id="mailto" class="button primary" href="#">‚úâÔ∏è Send inn p√• e‚Äëpost</a>
      </div>
    </div>
  </div>

  <footer class="container">
    Laget med ‚ù§Ô∏è ¬© <span id="year"></span> Dagvinner.no
  </footer>

  <canvas class="confetti" id="confetti" width="0" height="0" aria-hidden="true"></canvas>

  <script>
    // --- Data ---
    const STORIES = [
      {
        id: 1, title: "Kyllingmannen", tags: ["quiz", "vennekveld"], year: 2023,
        text: "Dag slo Eldri, og spilte inn 5 kyllingvideoer for √• plage henne. Dette er √©n av dem.",
        video: { src: "assets/videos/kylling1.mp4" }
      },
    ];

    const TAGS = [
      { key: 'alle', label: 'Alle' },
      { key: 'spill', label: 'Spill' },
      { key: 'brettspill', label: 'Brettspill' },
      { key: 'quiz', label: 'Quiz' },
      { key: 'sport', label: 'Sport' },
      { key: 'sommer', label: 'Sommer' },
      { key: 'jobb', label: 'Jobb' },
      { key: 'vennekveld', label: 'Vennekveld' },
      { key: 'familie', label: 'Familie' },
      { key: 'ord', label: 'Ord' },
      { key: 'sjakk', label: 'Sjakk' },
      { key: 'fifa', label: 'FIFA' },
    ];

    // --- Helpers ---
    const $ = (sel, el = document) => el.querySelector(sel);
    const $$ = (sel, el = document) => Array.from(el.querySelectorAll(sel));
    const state = {
      search: '',
      tag: 'alle'
    };
    // Base path for assets so it works on both GitHub Pages project sites and custom domain
    const isGithub = location.hostname.endsWith('github.io');
    const isFile = location.protocol === 'file:';
    const BASE = isFile
      ? './'                                  // n√•r du √•pner index direkte
      : (isGithub ? `/${location.pathname.split('/')[1]}/` : '/');

    function renderTags() {
      const wrap = $('#tags');
      wrap.innerHTML = '';
      TAGS.forEach(t => {
        const btn = document.createElement('button');
        btn.className = 'chip button' + (state.tag === t.key ? ' primary' : '');
        btn.type = 'button';
        btn.textContent = t.label;
        btn.setAttribute('data-tag', t.key);
        btn.onclick = () => {
          state.tag = t.key;
          localStorage.setItem('dagvinner.tag', state.tag);
          renderTags();
          renderStories();
        };
        wrap.appendChild(btn);
      });
    }

    function autoAspectForVideos(scope = document) {
      scope.querySelectorAll('video').forEach(v => {
        v.addEventListener('loadedmetadata', () => {
          const wrap = v.closest('.media');
          if (!wrap) return;
          const isLandscape = v.videoWidth >= v.videoHeight;
          wrap.dataset.ratio = isLandscape ? '16/9' : '9/16';
          // hvis portrett: bruk contain som default
          if (!isLandscape && !wrap.dataset.fit) wrap.dataset.fit = 'contain';
        }, { once: true });
      });
    }

    function rateScore(story) {
      // En t√∏ysete vurdering 6‚Äì11/10
      const base = 6 + (story.id % 6); // 6..11
      return base + '/10';
    }

    function storyHTML(s) {
      const tagBadges = s.tags
        .slice(0, 3)
        .map(t => `<span class="tag">${t}</span>`)
        .join(' ');

      const mediaHTML = s.video
        ? `
      <div class="media">
        <video controls preload="metadata" ${s.video.poster ? `poster="${BASE}${s.video.poster}"` : ''}>
          <source src="${BASE}${s.video.src}" type="video/mp4">
          Din nettleser st√∏tter ikke video-taggen.
        </video>
      </div>`
        : s.img
          ? `
      <div class="media">
        <img src="${BASE}${s.img}" alt="${s.imgAlt || s.title}" loading="lazy" decoding="async">
      </div>`
          : '';

      return `
    <article class="card story" tabindex="0" aria-labelledby="s-${s.id}-title">
      <div class="story-header">${tagBadges}</div>
      ${mediaHTML}
      <h3 id="s-${s.id}-title">${s.title}</h3>
      <p>${s.text}</p>
      <div class="meta">
        <span>√Ör: ${s.year}</span>
        <span class="rate" title="Dag sin elendig-vinner-sk√•r"><b>${rateScore(s)}</b> elendig vinner</span>
      </div>
    </article>`;
    }


    function matches(s) {
      const q = state.search.trim().toLowerCase();
      const inTag = state.tag === 'alle' || s.tags.includes(state.tag);
      const inText = !q || (s.title + ' ' + s.text + ' ' + s.tags.join(' ')).toLowerCase().includes(q);
      return inTag && inText;
    }

    function renderStories(scrollToTop = false) {
      const grid = $('#stories');
      const items = STORIES.filter(matches);
      grid.innerHTML = items.map(storyHTML).join('');
      $('#emptyState').hidden = items.length !== 0;
      if (scrollToTop) window.scrollTo({ top: grid.offsetTop - 60, behavior: 'smooth' });
      autoAspectForVideos($('#stories'));
    }

    function randomStory() {
      const pool = STORIES.filter(matches);
      if (!pool.length) return;
      const s = pool[Math.floor(Math.random() * pool.length)];
      state.search = '';
      $('#search').value = '';
      state.tag = 'alle';
      renderTags();
      $('#stories').innerHTML = storyHTML(s);
      $('#emptyState').hidden = true;
      confetti();
      window.location.hash = '#historier';
    }

    // --- Confetti (superenkel) ---
    function confetti() {
      const c = $('#confetti');
      const ctx = c.getContext('2d');
      const W = c.width = window.innerWidth;
      const H = c.height = window.innerHeight;
      const n = 80;
      const pieces = Array.from({ length: n }, () => ({
        x: Math.random() * W, y: -20, r: 4 + Math.random() * 6, vy: 2 + Math.random() * 3, vx: (Math.random() - .5) * 2
      }));
      let tick = 0;
      function frame() {
        ctx.clearRect(0, 0, W, H);
        ctx.globalAlpha = .9;
        ctx.fillStyle = ['#22d3ee', '#f59e0b', '#34d399', '#ef4444'][tick % 4];
        for (const p of pieces) {
          ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2); ctx.fill();
          p.y += p.vy; p.x += p.vx; if (p.y > H + 20) p.y = -10;
        }
        tick++; if (tick < 120) requestAnimationFrame(frame); else ctx.clearRect(0, 0, W, H);
      }
      frame();
    }

    // --- Share helpers ---
    function copy(text) { navigator.clipboard?.writeText(text); }
    function currentLink() { return location.origin + location.pathname + '#historier'; }

    // --- Init ---
    (function init() {
      // restore tag
      state.tag = localStorage.getItem('dagvinner.tag') || 'alle';
      renderTags();
      renderStories();
      autoAspectForVideos(document);
      $('#year').textContent = new Date().getFullYear();

      // bindings
      $('#search').addEventListener('input', (e) => { state.search = e.target.value; renderStories(); });
      $('#randomBtn').addEventListener('click', randomStory);
      $('#copyLinkBtn').addEventListener('click', () => { copy(currentLink()); $('#copyLinkBtn').textContent = '‚úÖ Lenke kopiert'; setTimeout(() => $('#copyLinkBtn').textContent = 'üîó Kopier lenke', 1500); });

      // mailto template
      const subject = encodeURIComponent('Bidrag til Dagvinner.no');
      const body = encodeURIComponent($('#template').textContent);
      const mailto = `mailto:thomasedagsvik@gmail.com?subject=${subject}&body=${body}`;
      $('#mailto').href = mailto;
      $('#copyTemplateBtn').addEventListener('click', () => { copy($('#template').textContent); $('#copyTemplateBtn').textContent = '‚úÖ Mal kopiert'; setTimeout(() => $('#copyTemplateBtn').textContent = 'üìã Kopier mal', 1500); });

      // keyboard: focus search with '/'
      window.addEventListener('keydown', (e) => {
        if (e.key === '/') { e.preventDefault(); $('#search').focus(); }
      });
    })();
  </script>
</body>

</html>